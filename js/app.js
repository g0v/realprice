(function(){"use strict";var t="undefined"!=typeof window?window:global;if("function"!=typeof t.require){var e={},n={},i=function(t,e){return{}.hasOwnProperty.call(t,e)},r=function(t,e){var n,i,r=[];n=/^\.\.?(\/|$)/.test(e)?[t,e].join("/").split("/"):e.split("/");for(var o=0,a=n.length;a>o;o++)i=n[o],".."===i?r.pop():"."!==i&&""!==i&&r.push(i);return r.join("/")},o=function(t){return t.split("/").slice(0,-1).join("/")},a=function(e){return function(n){var i=o(e),a=r(i,n);return t.require(a)}},s=function(t,e){var i={id:t,exports:{}};e(i.exports,a(t),i);var r=n[t]=i.exports;return r},l=function(t){var o=r(t,".");if(i(n,o))return n[o];if(i(e,o))return s(o,e[o]);var a=r(o,"./index");if(i(n,a))return n[a];if(i(e,a))return s(a,e[a]);throw Error('Cannot find module "'+t+'"')},u=function(t,n){if("object"==typeof t)for(var r in t)i(t,r)&&(e[r]=t[r]);else e[t]=n};t.require=l,t.require.define=u,t.require.register=u,t.require.brunch=!0}})(),function(){angular.module("scroll",[]).value("$anchorScroll",angular.noop),angular.module("app",["ui","partials","app.controllers","ui.state","ui.bootstrap"]).config(["$stateProvider","$urlRouterProvider","$locationProvider"].concat(function(t,e,n){return t.state("about",{url:"/about",templateUrl:"/partials/about.html"}).state("home",{url:"/",templateUrl:"/partials/home.html",controller:"Home"}),e.otherwise("/"),n.html5Mode(!0)})).run(["$rootScope","$state","$stateParams","$location"].concat(function(t,e,n,i){return t.$state=e,t.$stateParam=n,t.go=function(t){return i.path(t)}}))}.call(this),function(){function t(t,e){var n={}.hasOwnProperty;for(var i in e)n.call(e,i)&&(t[i]=e[i]);return t}function e(t,e){var n,i=function(r){return t.length>1?function(){var o=r?r.concat():[];return n=e?n||this:this,o.push.apply(o,arguments)<t.length&&arguments.length?i.call(n,o):t.apply(n,o)}:t};return i()}var n=[].slice;angular.module("app.controllers",["ui.state","leaflet-directive"]).controller({AppCtrl:["$scope","$location","$rootScope","$timeout"].concat(function(t,e,n,i){return t.$location=e,t.$watch("$location.path()",function(e){return e||(e="/"),t.activeNavId=e,t}),t.getClass=function(e){return t.activeNavId.substring(0,e.length===e)?"active":""},i(function(){return n.hideGithubRibbon=!0},1e4)})}).controller({Home:["$scope","$http"].concat(function(i,r){var o,a;return o=window.devicePixelRatio>1,a=o?"@2x":"",t(i,{markers:{},aggregate:"price",defaults:{maxZoom:17,tileLayer:"http://{s}.tile.cloudmade.com/ae2dc46faa384973b408b2467d727490/998"+a+"/256/{z}/{x}/{y}.png"},center:{lat:25.05,lng:121.55,zoom:13}}),r.get("/data/compact.json").error(function(){return console.log.apply(console,["err"].concat(n.call(arguments)))}).success(function(t){var n,r,o,a;return console.log(t.length),n=(r=i.$$childHead.leaflet).map,delete r.map,o=L.markerClusterGroup({singleMarkerMode:!0,iconCreateFunction:function(t){var n,i,r,o,a;return n=t.getChildCount(),i=t.getAllChildMarkers(),r=i.map(function(t){return t.options.price}).reduce(e(function(t,e){return t+e}))/n,o=i.map(function(t){return t.options.unitprice}).reduce(e(function(t,e){return t+e}))/n,a=" marker-cluster-",a+=10>n?"small":100>n?"medium":"large",r=Math.round(r/1e4),o=Math.round(o/1e4),new L.DivIcon({html:'<div class="aggregate-marker"><span class="price">'+r+'</span><span class="unitprice">'+o+"</span></div>",className:"marker-cluster"+a,iconSize:new L.Point(40,40)})}}),a=[],t.forEach(function(t){var e,n,i,r,o;return e=t.address,n=t.pos,i=t.price,r=t.unitprice,o=L.marker(L.latLng.apply(L,n),{title:e,price:i,unitprice:r}),o.bindPopup(e),a.push(o),null}),o.addLayers(a),n.addLayer(o)})})}).directive("resize",["$window"].concat(function(t){return function(e,n){var i;return i=function(){return e.width=t.innerWidth,e.height=t.innerHeight,e.contentHeight=t.innerHeight-$(n).offset().top},angular.element(t).bind("resize",function(){return e.$apply(i),e.$apply(i)}),i()}}))}.call(this),function(){angular.element(document).ready(function(){return angular.bootstrap(document,["app"])})}.call(this);